# ゴールデンテストケース — 守備AI品質基準

## 座標系
- 方向: 0°=三塁ファウル線, 45°=センター, 90°=一塁ファウル線
- launchAngle: <10°=ゴロ, 10-20°=ライナー, 20-50°=フライ, 50°+=ポップフライ
- exitVelocity: km/h
- 野手位置: P(0,18), 3B(-19,27), SS(-12,33), 2B(8,33), 1B(20,28), LF(-28,75), CF(0,84), RF(28,75)

## テストの目的
「この打球は誰が処理してどうなるべきか」を1ケースずつ検証できるようにする。
パラメータ調整の影響を個別に追跡可能にし、堂々巡りを防ぐ。

## ケース定義

### G: ゴロ（内野守備の基本）

| ID | dir | angle | velo | 期待 | 理由 |
|---|---|---|---|---|---|
| G01 | 10 | 5 | 130 | 5-3 アウト (3B→1B) | 三塁正面の典型ゴロ |
| G02 | 10 | 3 | 95 | 5-3 アウト | 三塁緩いゴロ |
| G03 | 25 | 5 | 120 | 6-3 アウト (SS→1B) | SS正面ゴロ |
| G04 | 35 | 5 | 130 | 6-3 アウト | SSやや二遊間寄り |
| G05 | 45 | 5 | 110 | 6-3 or 4-3 アウト | センター返しゴロ（SS/2B競合ゾーン）|
| G06 | 55 | 5 | 120 | 4-3 アウト (2B→1B) | 2B正面ゴロ |
| G07 | 70 | 5 | 120 | 4-3 or 3-unassisted | 一二塁間ゴロ（2B or 1B） |
| G08 | 85 | 5 | 110 | 3-unassisted アウト | 一塁正面ゴロ（1Bが自分で踏む） |
| G09 | 45 | 3 | 160 | 安打 or 6-3 | 強烈なセンター返し（高速ゴロ）|
| G10 | 30 | 2 | 80 | 1-3 or 6-3 アウト | 投手返し弱ゴロ（投手が処理すべき）|
| G11 | 45 | 2 | 75 | 1-3 アウト | 投手正面の緩いゴロ |
| G12 | 60 | 2 | 80 | 1-3 or 4-3 アウト | 投手/2B間の弱ゴロ |

### F: フライ（外野守備の基本）

| ID | dir | angle | velo | 期待 | 理由 |
|---|---|---|---|---|---|
| F01 | 15 | 30 | 110 | LF フライアウト | LF定位置フライ |
| F02 | 45 | 30 | 110 | CF フライアウト | CF定位置フライ |
| F03 | 75 | 30 | 110 | RF フライアウト | RF定位置フライ |
| F04 | 15 | 35 | 130 | LF フライアウト | LF深いフライ |
| F05 | 45 | 35 | 130 | CF フライアウト | CF深いフライ |
| F06 | 75 | 35 | 130 | RF フライアウト | RF深いフライ |
| F07 | 30 | 30 | 115 | LF or CF フライアウト | LF-CF間（どちらかが取る）|
| F08 | 60 | 30 | 115 | CF or RF フライアウト | CF-RF間 |
| F09 | 45 | 25 | 100 | CF フライアウト | 浅めのCFフライ |
| F10 | 15 | 40 | 140 | 長打 or LFフライアウト | フェンス際の深いフライ |

### L: ライナー

| ID | dir | angle | velo | 期待 | 理由 |
|---|---|---|---|---|---|
| L01 | 25 | 15 | 140 | SS/3B ライナーアウト or 安打 | 三遊間ライナー |
| L02 | 45 | 12 | 150 | 安打 (投手横を抜ける) | センターライナー（高速）|
| L03 | 70 | 15 | 130 | 2B/1B ライナーアウト or 安打 | 一二塁間ライナー |
| L04 | 45 | 18 | 110 | CF ライナーアウト | CF正面の中速ライナー |
| L05 | 15 | 15 | 120 | LF ライナーアウト or 安打 | レフト前ライナー |

### P: ポップフライ

| ID | dir | angle | velo | 期待 | 理由 |
|---|---|---|---|---|---|
| P01 | 45 | 60 | 80 | 内野フライアウト | 内野ポップフライ（SS or 2B）|
| P02 | 20 | 65 | 70 | 捕手 or 3B アウト | 捕手付近のファウルフライ |
| P03 | 70 | 65 | 70 | 捕手 or 1B アウト | 一塁側ポップフライ |
| P04 | 45 | 55 | 90 | 内野フライアウト | やや高いポップフライ |

### D: 併殺・犠飛（状況付き）

| ID | dir | angle | velo | ランナー | outs | 期待 | 理由 |
|---|---|---|---|---|---|---|---|
| D01 | 25 | 5 | 120 | 1塁 | 0 | 併殺 (6-4-3) | SS→2B→1BのDP |
| D02 | 55 | 5 | 120 | 1塁 | 0 | 併殺 (4-6-3) | 2B→SS→1BのDP |
| D03 | 45 | 30 | 110 | 3塁 | 0 | 犠牲フライ | CF犠飛で3塁走者ホームイン |
| D04 | 25 | 5 | 120 | 1塁 | 2 | 6-3 アウト (DPなし) | 2アウトでDPは不発 |

## 許容範囲
- ゴロ(G01-G08): **90%以上**のケースで期待した野手が処理
- 投手ゴロ(G10-G12): **50%以上**のケースで投手が処理（残りはSS/2B等でもOK）
- フライ(F01-F06): **95%以上**のケースで期待した野手が捕球
- フライ境界(F07-F08): **90%以上**のケースでどちらかの外野手が捕球
- ライナー(L01-L05): 統計的にアウト率が50-70%の範囲
- ポップフライ(P01-P04): **98%以上**アウト
- 併殺(D01-D02): DP成功率が30-70%（ランナー速度依存）
- 犠飛(D03): SF発生率が30-80%

## 使い方
1. resolvePlayWithAgents() を各ケースのパラメータで100回呼び出し
2. 結果を集計して許容範囲内か検証
3. 許容範囲外のケースを個別にデバッグ（collectTimeline=trueで追跡）
